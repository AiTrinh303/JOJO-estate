import{r,R as L}from"./react-BdizSdlO.js";import{l as d}from"./leaflet-DzFr0_qj.js";import{c as M,L as E,a as I,b as g,e as T,d as h,f as R,u as j,w as z}from"./@react-leaflet-hqhBTUq-.js";import"./react-dom-Bqx_4PLd.js";function m(){return m=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a])}return o},m.apply(this,arguments)}function S({bounds:o,boundsOptions:n,center:e,children:a,className:t,id:y,placeholder:u,style:s,whenReady:f,zoom:i,...c},b){const[v]=r.useState({className:t,id:y,style:s}),[l,O]=r.useState(null);r.useImperativeHandle(b,()=>(l==null?void 0:l.map)??null,[l]);const w=r.useCallback(C=>{if(C!==null&&l===null){const p=new d.Map(C,c);e!=null&&i!=null?p.setView(e,i):o!=null&&p.fitBounds(o,n),f!=null&&p.whenReady(f),O(M(p))}},[]);r.useEffect(()=>()=>{l==null||l.map.remove()},[l]);const P=l?L.createElement(E,{value:l},a):u??null;return L.createElement("div",m({},v,{ref:w}),P)}const U=r.forwardRef(S),V=I(function({position:n,...e},a){const t=new d.Marker(n,e);return g(t,T(a,{overlayContainer:t}))},function(n,e,a){e.position!==a.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==a.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==a.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==a.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==a.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),Z=h(function(n,e){const a=new d.Popup(n,e.overlayContainer);return g(a,e)},function(n,e,{position:a},t){r.useEffect(function(){const{instance:u}=n;function s(i){i.popup===u&&(u.update(),t(!0))}function f(i){i.popup===u&&t(!1)}return e.map.on({popupopen:s,popupclose:f}),e.overlayContainer==null?(a!=null&&u.setLatLng(a),u.openOn(e.map)):e.overlayContainer.bindPopup(u),function(){var c;e.map.off({popupopen:s,popupclose:f}),(c=e.overlayContainer)==null||c.unbindPopup(),e.map.removeLayer(u)}},[n,e,t,a])}),_=R(function({url:n,...e},a){const t=new d.TileLayer(n,z(e,a));return g(t,a)},function(n,e,a){j(n,e,a);const{url:t}=e;t!=null&&t!==a.url&&n.setUrl(t)});export{V as M,Z as P,_ as T,U as a};
